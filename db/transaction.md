# Transaction

트랜잭션 (Transaction)은 DB에서 실행되는 최소 작업 단위를 의미한다. DB 작업에 필요한 쿼리는 한개이거나, 여러개가 있을 수 있다. 구성된 쿼리가 전부 다 실행되거나 중간에 오류가 발생했을때 원래의 상태로 복구되는 기능을 트랜잭션을 활용해 구현할 수 있다.

## ACID
트랜잭션의 다음과 같은 4개의 특성을 만족해야 한다. 각각의 영어 철자를 따 ACID라고 부른다.

**원자성 (Atomicity) :** 트랜잭션을 구성하는 모든 쿼리가 성공하거나, 모두 실패해야 한다. 즉, 일부만 성공하거나 일부만 실패하는 경우는 발생하지 않는다
**일관성 (Consistency) :** 트랜잭션이 시작되기 전과 후의 데이터베이스는 같은 일관성을 유지해야 한다. 즉, 데이터베이스에서 정한 무결성 제약 조건을 항상 만족해야 한다
**격리성 (Isolation) :** 각각의 트랜잭션을 서로 간섭할 수 없도록 격리된 상태로 실행되어야 한다. 격리성은 트랜잭션 격리 수준(Isolation Level)을 통해 선택할 수 있다
**지속성 (Durability) :** 트랜잭션이 처리된 결과는 데이터베이스에 영구적으로 반영되어야 한다

### 무결성 제약 조건
무결성 제약 조건이란 데이터 베이스의 상태를 일관되게 유지하기 위해 정해둔 조건을 뜻한다.

**개체 무결성 :**  각 테이블의 기본키를 구성하는 속성은 null이나 중복값을 가질 수 없다
**참조 무결성 :**  각 테이블의 외래키는 null이거나 참조하는 테이블의 기본키 값이어야 한다
**도메인 무결성 :**  속성들의 값은 도메인에 속한 값이어야 한다. ex) 성별이라는 속성에서 '남', '여'를 제외한 데이터를 가질 수 없다
**고유 무결성 :**  특정 속성에 대해서 고유한 값을 가지는 조건이 있는 경우, 해당 속성의 값은 중복될 수 없다
**null 무결성 :**  특정 속성이 not null하다면 null값이 있어서는 안된다

### 트랜잭션 격리 수준 (Transaction Isolation Level)
트랜잭션에 대한 격리 수준은 다음과 같다. 아래로 갈 수록 강한 격리수준을 가지며 강한 격리수준을 가질수록 데이터의 정합성은 보장되지만 성능이 저하된다.

#### Read Uncommitted (커밋되지 않은 읽기)
#### Read Committed (커밋된 읽기)
#### Repeatable Read(반복 가능한 읽기)
#### Serializable(직렬화)

## JDBC Transaction

## Spring Transaction

### PlatformTransactionManager